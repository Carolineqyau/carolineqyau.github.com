
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Object Challenges</title>
</head>
<body>
    <h1>Challenge 39</h1>
    <form id="addpet">
        <label>Name <input type="text" name="name" id="name"></label><br><br>
        <label>Species <input type="text" name="species" id="species"></label><br><br>
        <label>Greeting <input type="text" name="greeting" id="greeting"></label><br><br>
        <input type="submit" value="add pet">
        <div></div>
    </form>

    <script>
        /* var pet = {
            name: "rocky", 
            species: "Hampster"
        }

        pet.name = "Bouncer";
        pet.species = "dog";
        pet.qualities = {
            color: "brown",
            size: "medium",
            disposition: "friendly"
        }

        console.log(pet);
        pet.qualities.supplies = ["dog food", "dog bed", "treats", "collar", "leash"];
        console.log(`I need to get ${pet.qualities.supplies.length} supplies for ${pet.name} at the store.`);
   
        pet.greeting = function() { alert("woof woof woof"); };
        pet.greeting(); */

        var petsDiv = document.querySelector('div');

        function addToPetsDiv(thisPet){
            var newPet = `<p>I have a pet ${thisPet.species} named ${thisPet.name}</p>`;
            newPet += `<p><button id="sayhi"> Click for a greeting from ${thisPet.name}</button></p>`;
            petsDiv.innerHTML = newPet;
            document.getElementById('sayhi').addEventListener('click', thisPet.greeting);
        }
        function pet(name, species, greeting) {
            this.name = name;
            this.species = species;
            this.greeting = function(){alert(greeting)};
        }

        document.getElementById('addpet').addEventListener('submit', function(event) {
            event.preventDefault();
            var formData = document.querySelectorAll('input');
            var errors = 0;

            formData.forEach( function(eachField) {
                if(eachField.value == ""){errors++;}
            });
            if(errors === 0){
                var myPet = new pet( formData[0].value, formData[1].value, formData[2].value);
                addToPetsDiv(myPet);
            } else {
                alert("fill in the fields!");
            }
        });
    </script>
    
</body>
</html>